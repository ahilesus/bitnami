global:
  # Credentials for Artifactory
  dockerSecret:
    name: &dockerSecretName docker-secret # pragma: allowlist secret
    dockerconfigjson: # pragma: allowlist secret
  imagePullSecrets:
    - *dockerSecretName
  networkPolicyLabel:
    app: patch-sa
    role: eo-service
  # Passwords are auto-generated by default, but you can also set your own passwords.
  postgresql:
    auth:
      secretName: postgres-secret # pragma: allowlist secret
      # Password for Postgres admin user. Username: 'postgres'
      postgresPassword: # pragma: allowlist secret
      # Password for the Keycloak database. Username: 'keycloak'
      keycloakDbPassword: # pragma: allowlist secret
  keycloak:
    auth:
      secretName: keycloak-secret # pragma: allowlist secret
      # Password for the Keycloak admin. Username: 'keycloak'
      keycloakAdminPassword: # pragma: allowlist secret
      keycloakSecurityAdminUsrPassword: # pragma: allowlist secret
      keycloakAuthClientPassword: # pragma: allowlist secret
      keycloakIAMClientPassword: # pragma: allowlist secret
      keycloakDELCOClientPassword: # pragma: allowlist secret
    settings:
      forceAdminUserPostFirstLoginActions: true
  pgadmin:
    auth:
      secretName: pgadmin-secret # pragma: allowlist secret
      # Password for the pgadmin admin. Username: 'admin@admin.com'
      pgAdminPassword: # pragma: allowlist secret
  fido:
    auth:
      secretName: fido-secret # pragma: allowlist secret
      # Password for the fido rv & owner.
      encryptPassword: # pragma: allowlist secret
      apiPassword: # pragma: allowlist secret
      sslPassword: # pragma: allowlist secret
  workflowEngine:
    auth:
      secretName: workflow-engine-secret # pragma: allowlist secret
      # Credential to access workflow-engine api
      apiPassword: # pragma: allowlist secret
      k3sConfigSecretValue: # pragma: allowlist secret
  catalog:
    auth:
      secretName: catalog-secret #pragma: allowlist secret
      vaultSecretName: hzp-catalog-svc-vault-secret #pragma: allowlist secret
  vault:
    auth:
      secretName: vault-secret #pragma: allowlist secret
    host: "http://edgevault.{{ .Release.Namespace }}.svc.cluster.local"
    port: "8200"
    networkPolicyLabel:
      app: eo-vault
      role: eo-service
  ssh:
    auth:
      secretName: ssh-secret # pragma: allowlist secret
      sshPassword: # pragma: allowlist secret
  certificate:
    auth:
      secretName: hzp-certificate-svc-vault-secret #pragma: allowlist secret
  notification:
    auth:
      secretName: hzp-notification-svc-vault-secret #pragma: allowlist secret
  recovery:
    auth:
      secretName: hzp-recovery-svc-vault-secret #pragma: allowlist secret
  onboarding:
    auth:
      secretName: hzp-fido-onboarding-svc-vault-secret #pragma: allowlist secret
  initialization:
    auth:
      secretName: hzp-eo-initialization-svc-vault-secret #pragma: allowlist secret
  mist:
    auth:
      secretName: mist-vault-secret #pragma: allowlist secret
    org:
      secretName: mist-org-secret #pragma: allowlist secret
  owner:
    auth:
      secretName: fido-owner-vault-secret #pragma: allowlist secret
  spire:
    auth:
      secretName: spire-vault-secret #pragma: allowlist secret
  upgrade:
    auth:
      secretName: hzp-upgrade-svc-vault-secret #pragma: allowlist secret
  fusion:
    auth:
      secretName: fusion-svc-vault-secret #pragma: allowlist secret
  product:
    auth:
      secretName: product-secret #pragma: allowlist secret
      # The following secrets must be set during helm install via env variables:
      #  --set global.product.auth.vmsAccessTokenEndpt=$VMS_ACCESS_TOKEN_ENDPT --set global.product.auth.vmsAccessTokenType=$VMS_ACCESS_TOKEN_TYPE
      #  --set global.product.auth.vmsAccessTokenUser=$VMS_ACCESS_TOKEN_USER --set global.product.auth.vmsAccessTokenPass=$VMS_ACCESS_TOKEN_PASS
      #  --set global.product.auth.vmsXferVoucherEndpt=$VMS_XFER_VOUCHER_ENDPT --set global.product.auth.vmsXferVoucherType=$VMS_XFER_VOUCHER_TYPE
      #  --set global.product.auth.vmsXferVoucherOauth=$VMS_XFER_VOUCHER_OAUTH --set global.product.auth.vmsXferVoucherAppId=$VMS_XFER_VOUCHER_APP_ID
      #  --set global.product.auth.vmsXferVoucherSecret=$VMS_XFER_VOUCHER_SECRET
      #  --set global.product.auth.srsClientId=$SRS_CLIENT_ID --set global.product.auth.SrsClientSecret=$SRS_CLIENT_SECRET
      vmsAccessTokenEndpt: default
      vmsAccessTokenType: default
      vmsAccessTokenUser: default
      vmsAccessTokenPass: default
      vmsXferVoucherEndpt: default
      vmsXferVoucherType: default
      vmsXferVoucherOauth: default
      vmsXferVoucherAppId: default
      vmsXferVoucherSecret: default
      srsClientId: default
      srsClientSecret: default
  fru:
    auth:
      secretName: hzp-fru-svc-vault-secret #pragma: allowlist secret
  inventory:
    auth:
      secretName: hzp-inventory-svc-vault-secret #pragma: allowlist secret
  metrics:
    auth:
      secretName: hzp-metrics-svc-vault-secret #pragma: allowlist secret
  istio:
    mTLSHost: []
    mTLSHostRecovery: []
    defaultPrefix:
      mTLSHost: ""
      mTLSHostRecovery: ""
  test:
    enabled: false
  vaultBootstrap:
    smoketestEnabled: false
  podSecurityContext:
    runAsUser: 1001
    runAsGroup: 1001

bootstrap:
  # Enable or disable the vault-bootstrap job to initialize vault
  config:
    policies:
      path: policies
  image:
    name: vault-bootstrap-svc
    pullPolicy: Always
    tag: latest
  secret:
    names:
      - "vault-secret"
      - "hzp-certificate-svc-vault-secret"
      - "hzp-notification-svc-vault-secret"
      - "hzp-recovery-svc-vault-secret"
      - "hzp-fido-onboarding-svc-vault-secret"
      - "hzp-eo-initialization-svc-vault-secret"
      - "hzp-fru-svc-vault-secret"
      - "hzp-inventory-svc-vault-secret"
      - "mist-vault-secret"
      - "fido-owner-vault-secret"
      - "spire-vault-secret"
      - "hzp-upgrade-svc-vault-secret"
      - "fusion-svc-vault-secret"
      - "hzp-catalog-svc-vault-secret"
      - "hzp-metrics-svc-vault-secret"
  imtls:
    secret:
      names:
        - eo-vault-imtls-secret
        - opensearch-imtls-secret
        - seaweed-imtls-secret
        - fido-manufacturer-imtls-secret
        - fido-owner-imtls-secret
        - fido-rv-imtls-secret
        - fido-onboarding-svc-imtls-secret
        - fluentbit-imtls-secret
        - fusion-api-service-imtls-secret
        - fusion-blueprint-service-imtls-secret
        - fusion-drift-imtls-secret
        - nginx-fusion-imtls-secret
        - nginx-mist-imtls-secret
        - fusion-plugins-service-imtls-secret
        - fusion-restservice-imtls-secret
        - fusion-secrets-service-imtls-secret
        - execution-scheduler-imtls-secret
        - mgmt-worker-imtls-secret
        - stage-backend-imtls-secret
        - hzp-api-gateway-svc-imtls-secret
        - hzp-attestation-svc-imtls-secret
        - hzp-catalog-svc-imtls-secret
        - hzp-certificate-svc-imtls-secret
        - hzp-compute-svc-imtls-secret
        - hzp-datacollection-svc-imtls-secret
        - hzp-delco-svc-imtls-secret
        - hzp-ece-firmwareupdate-svc-imtls-secret
        - hzp-eo-initialization-svc-imtls-secret
        - hzp-eoproxy-svc-imtls-secret
        - hzp-events-svc-imtls-secret
        - hzp-fru-cru-svc-imtls-secret
        - hzp-health-check-svc-imtls-secret
        - hzp-iam-configuration-svc-imtls-secret
        - hzp-iam-policy-svc-imtls-secret
        - hzp-iam-session-svc-imtls-secret
        - hzp-iam-svc-imtls-secret
        - hzp-ingress-authz-svc-imtls-secret
        - hzp-inventory-svc-imtls-secret
        - hzp-job-svc-imtls-secret
        - hzp-metrics-svc-imtls-secret
        - hzp-notification-svc-imtls-secret
        - hzp-oe-template-mgr-svc-imtls-secret
        - hzp-product-svc-imtls-secret
        - hzp-recovery-svc-imtls-secret
        - hzp-rules-svc-imtls-secret
        - hzp-scheduler-svc-imtls-secret
        - hzp-security-svc-imtls-secret
        - hzp-tags-svc-imtls-secret
        - hzp-time-svc-imtls-secret
        - hzp-upgrade-svc-imtls-secret
        - hzp-qa-svc-imtls-secret
        - mockserver-imtls-secret
        - public-fileserver-imtls-secret
        - nats-jetstream-imtls-secret
        - keycloak-imtls-secret
        - gocky-imtls-secret
        - portal-imtls-secret
        - postgresql-imtls-secret
        - vminsert-imtls-secret
        - vmselect-imtls-secret
        - vmstorage-imtls-secret
        - nginx-gw-imtls-secret
        - fusion-drift-service-imtls-secret
      domains:
        - "*"
        - "*.eo-management-seaweedfs-master"
        - "*.eo-management-seaweedfs-filer"
        - "*.eo-management-seaweedfs-s3"
        - "*.eo-management-seaweedfs-volume"
        - "*.eo-management-seaweedfs-filer-client"
        - "*.eoproxy-headless"
        - "*.hzp-eoproxy-svc"
  podLabels:
    hzp-app: eo-vault
    hzp-role: eo-service
    hzp.iam.webhook/active: "false"
    sidecar.istio.io/inject: "false"
test:
  # Subchart values
  podLabels:
    hzp.iam.webhook/active: "false"
    hzp-app: eo-vault-regression
    hzp-role: smoke-test
  enabled: false
  testsuite: test-suites/smoke.xml
  replicaCount: 1
  image:
    name: vault-bootstrap-smoke-test
    pullPolicy: Always
    tag: latest
  cpu: 0.25
  memory: 512Mi
  rbac:
    namePrefix: vault-bootstrap-smoke-test
  qtest:
    regressionProjectId: 181
    regressionContainerId: 679693
